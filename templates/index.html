{% extends "base.html" %}

{% block content %}
<div class="flex flex-col items-center justify-start sm:justify-center min-h-screen p-4 sm:p-6 lg:p-8">
<div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 max-w-md w-full backdrop-blur-sm bg-opacity-95">
    {% if error %}
    <div class="text-red-600 font-semibold mb-4 text-center">
        {{ error }}
    </div>
    {% endif %}
    <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-5">
        <button
            type="button"
            hx-post="/admin/refresh"
            hx-target="#refresh-status"
            hx-swap="innerHTML"
            hx-disabled-elt="this"
            class="inline-flex items-center justify-center gap-2 rounded-xl bg-slate-900 text-white text-sm font-semibold px-4 py-2.5 shadow-md hover:bg-slate-800 transition-all duration-200 w-full sm:w-auto">
            Refresh catalog
        </button>
        <div id="refresh-status" class="text-xs sm:text-sm text-gray-500" aria-live="polite">
            Catalog ready.
        </div>
    </div>
    <div id="album-panel">
        {% include "_album_panel.html" %}
    </div>
</div>
</div>

<script>
    document.addEventListener('keydown', function(e) {
        if (e.target.getAttribute('role') === 'radio') {
            const segments = Array.from(document.querySelectorAll('[role="radio"]'));
            let currentIndex = segments.indexOf(e.target);
            let newIndex = currentIndex;
            
            if (e.key === 'ArrowLeft') {
                newIndex = currentIndex > 0 ? currentIndex - 1 : segments.length - 1;
            } else if (e.key === 'ArrowRight') {
                newIndex = currentIndex < segments.length - 1 ? currentIndex + 1 : 0;
            } else if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                e.target.click();
            }
            
            if (newIndex !== currentIndex) {
                segments[newIndex].focus();
            }
        }
    });
</script>
{% endblock %}
